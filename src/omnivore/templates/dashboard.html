{% extends 'layouts/base.html' %}

{% block title %}Instrument Dashboard{% endblock %}

{% block content %}
    <h1>Instrument Predictions</h1>
    <table>
        <thead>
            <tr>
                <th>Symbol</th>
                <th>Name</th>
                <th>Latest Prediction</th>
                <th>Target Date</th>
                <th>Directional Accuracy</th>
                <th>MAE</th>
            </tr>
        </thead>
        <tbody>
        {% for row in instrument_rows %}
            <tr>
                <td>{{ row['instrument']['symbol'] }}</td>
                <td>{{ row['instrument']['name'] }}</td>
                <td>
                    {% if row['prediction'] %}
                        {{ row['prediction']['predicted_value'] }}
                    {% else %}
                        &mdash;
                    {% endif %}
                </td>
                <td>
                    {% if row['prediction'] %}
                        {{ row['prediction']['target_date'] }}
                    {% else %}
                        &mdash;
                    {% endif %}
                </td>
                <td>
                    {% if row['accuracy'] and row['accuracy']['directional_accuracy'] is not none %}
                        {{ row['accuracy']['directional_accuracy'] * 100 | round(2) }}%
                    {% else %}
                        &mdash;
                    {% endif %}
                </td>
                <td>
                    {% if row['accuracy'] and row['accuracy']['mae'] is not none %}
                        {{ row['accuracy']['mae'] | round(6) }}
                    {% else %}
                        &mdash;
                    {% endif %}
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
